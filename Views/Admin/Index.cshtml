@model EventShow.Models.Admin
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Admin Login</title>
    <link href="../admin/css/login.css" rel="stylesheet" type="text/css" />
</head>


<body>



    <div class="center imgw" style="display:flex; justify-content:center;">

        <div class="center login">

            <h1>Admin Login</h1>

            @using (Html.BeginForm())

            {

                @Html.AntiForgeryToken()

                <form>

                    <div class="txt_field">

                        @Html.TextBox("AdminName", null, new { @class = "", @type = "text", required = "" })
                        <span> </span>
                        <label>Name</label>
                    </div>

                    <div class="txt_field">

                        @Html.TextBox("AdminPassword", null, new { @class = "", @type = "password", required = "" })
                        <span> </span>
                        <label>Password</label>
                    </div>



                    <input type="submit" value="Login" />

                </form>
            }

        </div>
    </div>


    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script type="text/javascript">

        $("form").submit(function (e)
        {
            e.preventDefault();
            var $form = $(this);
            var data = $form.serialize();
            CheckLogin(data);
        });

        function CheckLogin(data) {
            $.ajax({
                type: "POST",
                url: '@Url.Action("Index", "Admin")',
                data: data,
                success: function (response)
                {
                    var admin_id = response.id;
                    var admin_name = response.name;
                    if (response.success) {
                        window.location.href = "/Home/Index?id=" + admin_id + "&name=" + admin_name;
                    }
                    else {
                        alert("Incorrect name or password, please try again!");
                    }                   
                }
            });
        }

    </script>


</body>

</html>